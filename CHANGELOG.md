# Changelog

## [v3.17.0](https://github.com/zendesk/active_record_shards/tree/v3.17.0) (2020-04-02)

[Full Changelog](https://github.com/zendesk/active_record_shards/compare/v3.16.0...v3.17.0)

**Merged pull requests:**

- v3.17.0 [\#235](https://github.com/zendesk/active_record_shards/pull/235) ([bquorning](https://github.com/bquorning))
- Update circleci to run rake commands through 'bundle exec' [\#234](https://github.com/zendesk/active_record_shards/pull/234) ([zdennis](https://github.com/zdennis))
- Add \#on\_primary\_db which executes a block in the context of the primaâ€¦ [\#233](https://github.com/zendesk/active_record_shards/pull/233) ([zdennis](https://github.com/zdennis))
- Upgrade RuboCop [\#230](https://github.com/zendesk/active_record_shards/pull/230) ([bquorning](https://github.com/bquorning))

## [v3.16.0](https://github.com/zendesk/active_record_shards/tree/v3.16.0) (2019-12-10)

[Full Changelog](https://github.com/zendesk/active_record_shards/compare/v3.15.3...v3.16.0)

**Merged pull requests:**

- Bump version [\#231](https://github.com/zendesk/active_record_shards/pull/231) ([bquorning](https://github.com/bquorning))
- Test against Rails 6.0 [\#229](https://github.com/zendesk/active_record_shards/pull/229) ([zhuravel](https://github.com/zhuravel))
- Minor changes [\#228](https://github.com/zendesk/active_record_shards/pull/228) ([bquorning](https://github.com/bquorning))
- Remove all deprecated must\_\* test matchers [\#227](https://github.com/zendesk/active_record_shards/pull/227) ([bquorning](https://github.com/bquorning))
- Rails 6.0 compatibility [\#225](https://github.com/zendesk/active_record_shards/pull/225) ([zhuravel](https://github.com/zhuravel))

# Notable changes

All notable changes to this project will be documented here. The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/), and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html) (from 3.17.0 onwards)

## [Unreleased]

### Changed

[Deprecation] Adds deprecation warning for all methods containing `master`/`slave` which recommends using the updated `primary`/`replica` methods. The main public methods changed:

1. `on_slave` => `on_replica`
1. `on_master` => `on_primary`

other methods changed:

1. `on_master_if` => `on_primary_if`
1. `on_slave_if` => `on_replica_if`
1. `on_master_unless` => `on_primary_unless`
1. `on_slave_unless` => `on_replica_unless`
1. `on_master_or_slave` => `on_primary_or_replica`
1. `exists_with_default_slave` => `exists_with_default_replica`
1. `from_slave` => `from_replica`
1. `initialize_shard_and_slave` => `initialize_shard_and_replica`
1. `ShardSelection#options` no longer uses `:slave`, if this method was overridden ensure it returns `:replica` instead of `:slave`: `{ shard: .., replica: ... }`

SQL comments (see [debugging](/README.md#debugging)) will now log `... /* replica */` instead of `... /* slave */`


\* *This Changelog was automatically generated by [github_changelog_generator](https://github.com/github-changelog-generator/github-changelog-generator)*
